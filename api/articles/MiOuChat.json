{"title":"宝塔搭建fiora聊天室","uid":"204fdc58f3392f2efeae8886857c8e77","slug":"MiOuChat","date":"2021-08-20T07:31:38.000Z","updated":"2022-05-25T11:20:01.300Z","comments":true,"path":"api/articles/MiOuChat.json","keywords":"编程,笔记,生活,感悟,诗歌,音乐,影视,博客,Hexo","cover":[],"content":"<h2 id=\"情境引入\"><a href=\"#情境引入\" class=\"headerlink\" title=\"情境引入\"></a>情境引入</h2><div class=\"custom-quote tip\">\n<span class=\"custom-quote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M20.86 14.13C20 14.7 19.56 15.74 19.77 16.76C20.13 18.55 18.55 20.13 16.76 19.77C15.74 19.57 14.7 20 14.13 20.86C13.12 22.38 10.89 22.38 9.88 20.86C9.3 20 8.26 19.56 7.24 19.77C5.45 20.13 3.87 18.55 4.23 16.76C4.43 15.74 4 14.7 3.14 14.13C1.62 13.12 1.62 10.89 3.14 9.88C4 9.3 4.44 8.26 4.23 7.24C3.87 5.45 5.45 3.87 7.24 4.23C8.26 4.44 9.3 4 9.87 3.14C10.88 1.62 13.11 1.62 14.12 3.14C14.7 4 15.74 4.44 16.76 4.23C18.55 3.87 20.13 5.45 19.77 7.24C19.56 8.26 20 9.3 20.86 9.87C22.38 10.88 22.38 13.12 20.86 14.13Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M12.01 15C12.01 14.5 12.01 14.5 12.01 14.5C12.04 13.75 13 13.46 14.04 12.2C14.41 11.74 14.69 11.41 14.86 10.85C15.15 9.95 14.92 9.18 14.86 9.02C14.8 8.79 14.52 8 13.72 7.46C13.06 7.02 12.42 7 12.14 7C11.9 7 11.36 7 10.78 7.3C10.28 7.56 9.98 7.9 9.83 8.1C9.24 8.82 9.06 9.63 9 10.06\"></path>\n<path stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M11.99 18H12.01\"></path>\n</svg></span>\n<p class=\"custom-quote-title\"><code>fiora</code>介绍</p>\n<p><ul>\n<li><code>fiora</code> 是一款有趣的聊天应用. 基于 <code>node.js</code>, <code>mongodb</code>, <code>react</code> 和 <code>socket.io</code> 等技术开发 </li>\n<li>项目地址：<a href=\"https://github.com/yinxin630/fiora\">Fiora</a><h3 id=\"功能\"><a href=\"#功能\" class=\"headerlink\" title=\"功能\"></a>功能</h3> 1.注册账号并登录, 可以长久保存你的数据<br> 2.加入现有群组或者创建自己的群组, 来和大家交流<br> 3.和任意人私聊, 并添加其为好友<br> 4.多种消息类型, 包括文本 &#x2F; 表情 &#x2F; 图片 &#x2F; 代码 &#x2F; 文件 &#x2F; 命令, 还可以搜索表情包<br> 5.当收到新消息时推送通知, 可以自定义通知铃声, 还可以把消息读出来<br> 6.选择你喜欢的主题, 并且可以设置为任何你喜欢的壁纸以及主题颜色<br> 7.设置管理员来管理用户<h3 id=\"展示\"><a href=\"#展示\" class=\"headerlink\" title=\"展示\"></a>展示</h3><a data-fancybox=\"gallery\" href=\"/images/2021/08/20/f708722f-292b-4508-bfc4-613d7a11729b.png\"><img src=\"/images/2021/08/20/f708722f-292b-4508-bfc4-613d7a11729b.png\" alt=\"宝塔安装fiora\"></a><br>:::</li>\n</ul>\n<h2 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h2><h3 id=\"环境\"><a href=\"#环境\" class=\"headerlink\" title=\"环境\"></a>环境</h3><p>要运行 <code>fiora</code>, 你需要 <code>Node.js</code>(推荐 <code>v14 LTS</code> 版本), <code>MongoDB</code> 和 <code>redis</code><br>，由于是使用宝塔安装，你可以在宝塔的软件商店直接安装<code>PM2管理器</code>、<code>MongoDB</code>、<code>Redis</code>，其会自动配置好环境。</p>\n<h3 id=\"运行\"><a href=\"#运行\" class=\"headerlink\" title=\"运行\"></a>运行</h3><p>1.确保安装了 <code>yarn</code>, 如果没有安装请执行： <code>npm install -g yarn</code><br>2.克隆项目到本地： <code>git clone https://github.com/yinxin630/fiora.git &amp;   cd fiora</code><br>3.安装项目依赖： <code>yarn install</code><br>4.构建客户端代码： <code>yarn build:web</code><br>5.配置 JwtSecret： <code>echo &quot;JwtSecret=&lt;string&gt;&quot; &gt; .env2</code> ， 要将 <code>&lt;string&gt;</code> 替换为一个秘密文本，如<code>echo &quot;JwtSecret=123456&quot; &gt; .env2</code><br>6.启动服务端： <code>yarn start</code><br>7.使用浏览器打开： <code>http://[ip地址]:[端口](比如 http://127.0.0.1:9200)</code><br>8.为了进程守护，可以使用<code>pm2</code>运行项目：<code>pm2 start yarn --name fiora -- start</code></p>\n<p>:::warning<br>在访问站点之前，一点要在安全组那里开放<code>9200</code>端口，并在宝塔“安全”那里开放<code>9200</code>端口。</p>\n</div>\n<h2 id=\"配置与代理\"><a href=\"#配置与代理\" class=\"headerlink\" title=\"配置与代理\"></a>配置与代理</h2><h3 id=\"配置\"><a href=\"#配置\" class=\"headerlink\" title=\"配置\"></a>配置</h3><p>在 <code>fiora</code> 根目录创建 <code>.env</code> 文件, 在里面填写 <code>key=value</code> 键值对(每行一个), 即可修改相应配置. 比如修改端口号 <code>Port=8888</code><br>这里提供几个简单的配置，其他详细的配置请参考：<a href=\"https://yinxin630.github.io/fiora/zh-Hans/docs/config\">fiora配置</a></p>\n<pre class=\"line-numbers language-yaml\" data-language=\"yaml\"><code class=\"language-yaml\">JwtSecret&#x3D;123456 #设置JwtSecret，用于加密传输文本\nAdministrator&#x3D;611122f83253662a93123456 #设置管理员ID\nDisableRegister&#x3D;true #禁止用户注册</code></pre>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>1.管理员<code>id</code>可以在第一次注册用户后，在<code>fiora</code>根目录，使用命令：<code>fiora getUserId [username]</code>获取，如：<code>fiora getUserId MeerOst</code><br>2.也可以在第一次执行<code>yarn start</code>时，在第一次注册用户后，命令窗口会显示如图所示的信息，其中<code>5ed5106b96864aa333a39e49</code>就是你的用户<code>ID</code><br><a data-fancybox=\"gallery\" href=\"/images/2021/08/20/8a016a3b-b8a3-4cb8-874c-8110f914fc9e.png\"><img src=\"/images/2021/08/20/8a016a3b-b8a3-4cb8-874c-8110f914fc9e.png\" alt=\"宝塔安装fiora\"></a></p></blockquote>\n<h3 id=\"nginx反向代理\"><a href=\"#nginx反向代理\" class=\"headerlink\" title=\"nginx反向代理\"></a><code>nginx</code>反向代理</h3><p>在使用宝塔添加站点后，其<code>nginx</code>配置文件如图：</p>\n<details class=\"custom-details\">\n<summary>nginx配置</summary>\n<p><pre class=\"line-numbers language-nginx\" data-language=\"nginx\"><code class=\"language-nginx\">server\n&#123;\n    listen 80;\n\tlisten 443 ssl http2;\n    server_name chat.meerost.com;\n    index index.php index.html index.htm default.php default.htm default.html;\n    root &#x2F;Raumzeit&#x2F;MeerOst&#x2F;WebRoot&#x2F;Chat;\n    \n    #SSL-START SSL相关配置，请勿删除或修改下一行带注释的404规则\n    #error_page 404&#x2F;404.html;\n    #HTTP_TO_HTTPS_START\n    if ($server_port !~ 443)&#123;\n        rewrite ^(&#x2F;.*)$ https:&#x2F;&#x2F;$host$1 permanent;\n    &#125;\n    #HTTP_TO_HTTPS_END\n    ssl_certificate    &#x2F;www&#x2F;server&#x2F;panel&#x2F;vhost&#x2F;cert&#x2F;chat.meerost.com&#x2F;fullchain.pem;\n    ssl_certificate_key    &#x2F;www&#x2F;server&#x2F;panel&#x2F;vhost&#x2F;cert&#x2F;chat.meerost.com&#x2F;privkey.pem;\n    ssl_protocols TLSv1.1 TLSv1.2;\n    ssl_ciphers EECDH+CHACHA20:EECDH+CHACHA20-draft:EECDH+AES128:RSA+AES128:EECDH+AES256:RSA+AES256:EECDH+3DES:RSA+3DES:!MD5;\n    ssl_prefer_server_ciphers on;\n    ssl_session_cache shared:SSL:10m;\n    ssl_session_timeout 10m;\n    add_header Strict-Transport-Security &quot;max-age&#x3D;31536000&quot;;\n    error_page 497  https:&#x2F;&#x2F;$host$request_uri;\n\n    #SSL-END\n    #ERROR-PAGE-START  错误页配置，可以注释、删除或修改\n    #error_page 404 &#x2F;404.html;\n    #error_page 502 &#x2F;502.html;\n    #ERROR-PAGE-END\n    \n    #PHP-INFO-START  PHP引用配置，可以注释或修改\n    #清理缓存规则\n\n    location ~ &#x2F;purge(&#x2F;.*) &#123;\n        proxy_cache_purge cache_one $host$1$is_args$args;\n        #access_log  &#x2F;www&#x2F;wwwlogs&#x2F;git.meerost.com_purge_cache.log;\n    &#125;\n\t#引用反向代理规则，注释后配置的反向代理将无效\n\tinclude &#x2F;www&#x2F;server&#x2F;panel&#x2F;vhost&#x2F;nginx&#x2F;proxy&#x2F;git.meerost.com&#x2F;*.conf;\n\n\tinclude enable-php-00.conf;\n    #PHP-INFO-END\n    \n    #REWRITE-START URL重写规则引用,修改后将导致面板设置的伪静态规则失效\n    include &#x2F;www&#x2F;server&#x2F;panel&#x2F;vhost&#x2F;rewrite&#x2F;git.meerost.com.conf;\n    #REWRITE-END\n    \n    #禁止访问的文件或目录\n    location ~ ^&#x2F;(\\.user.ini|\\.htaccess|\\.git|\\.svn|\\.project|LICENSE|README.md)\n    &#123;\n        return 404;\n    &#125;\n    \n    #一键申请SSL证书验证目录相关设置\n    location ~ \\.well-known&#123;\n        allow all;\n    &#125;\n\n    \n    access_log  &#x2F;www&#x2F;wwwlogs&#x2F;chat.meerost.com.log;\n   error_log  &#x2F;www&#x2F;wwwlogs&#x2F;chat.meerost.com.error.log;\n&#125;</code></pre>\n</p>\n</details>\n<p>然后在配置文件的适当位置添加：</p>\n<pre class=\"line-numbers language-nginx\" data-language=\"nginx\"><code class=\"language-nginx\">#SSL-END\n    location &#x2F; &#123;\n      proxy_set_header   X-Real-IP        $remote_addr;\n      proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for;\n      proxy_set_header   Host             $http_host;\n      proxy_set_header   Upgrade          $http_upgrade;\n      proxy_set_header   X-NginX-Proxy    true;\n      proxy_set_header   Connection &quot;upgrade&quot;;\n      proxy_http_version 1.1;\n      proxy_pass         http:&#x2F;&#x2F;localhost:9200;#修改为你自己的端口\n   &#125;</code></pre>\n<p>请勿使用宝塔的反向代理，宝塔的反向代理虽然能够运行，但是后续构建<code>APP</code>，会出现无法访问的情况。另外：如果需要构建<code>APP</code>，而且使用的是宝塔自带的<code>nginx</code>站点配置，一定要删除这一段配置：</p>\n<pre class=\"line-numbers language-nginx\" data-language=\"nginx\"><code class=\"language-nginx\">#ERROR-PAGE-START  错误页配置，可以注释、删除或修改\n   #error_page 404 &#x2F;404.html;\n   #error_page 502 &#x2F;502.html;\n   #ERROR-PAGE-END\n   \n   #PHP-INFO-START  PHP引用配置，可以注释或修改\n   #清理缓存规则\n\n   location ~ &#x2F;purge(&#x2F;.*) &#123;\n       proxy_cache_purge cache_one $host$1$is_args$args;\n       #access_log  &#x2F;www&#x2F;wwwlogs&#x2F;git.meerost.com_purge_cache.log;\n   &#125;\n#引用反向代理规则，注释后配置的反向代理将无效\ninclude &#x2F;www&#x2F;server&#x2F;panel&#x2F;vhost&#x2F;nginx&#x2F;proxy&#x2F;git.meerost.com&#x2F;*.conf;\n\ninclude enable-php-00.conf;\n   #PHP-INFO-END\n   \n   #REWRITE-START URL重写规则引用,修改后将导致面板设置的伪静态规则失效\n   include &#x2F;www&#x2F;server&#x2F;panel&#x2F;vhost&#x2F;rewrite&#x2F;git.meerost.com.conf;\n   #REWRITE-END\n   \n   #禁止访问的文件或目录\n   location ~ ^&#x2F;(\\.user.ini|\\.htaccess|\\.git|\\.svn|\\.project|LICENSE|README.md)\n   &#123;\n       return 404;\n   &#125;\n   \n   #一键申请SSL证书验证目录相关设置\n   location ~ \\.well-known&#123;\n       allow all;\n   &#125;</code></pre>\n<p>否则<code>APP</code>也会出现无法访问的情况</p>\n<h2 id=\"魔改\"><a href=\"#魔改\" class=\"headerlink\" title=\"魔改\"></a>魔改</h2><p>1.如果要修改侧边栏，<del>可以在<code>git clone</code>这一步之后（一定要在构建之前修改源码）</del>，修改<code>/fiora/packages/web/src/modules/Sidebar/</code>下的文件，修改之后，使用命令：<code>yarn build:web</code>重构一下，再清除nginx缓存即可。<br>2.如果要修改主页模板，可以修改文件<code>/fiora/packages/web/src/template.html</code><br>3.如果要修改隐私政策模板，请修改<code>/fiora/packages/server/public/PrivacyPolicy.html</code>文件</p>\n<h2 id=\"构建APP\"><a href=\"#构建APP\" class=\"headerlink\" title=\"构建APP\"></a>构建APP</h2><h3 id=\"修改配置（源码）\"><a href=\"#修改配置（源码）\" class=\"headerlink\" title=\"修改配置（源码）\"></a>修改配置（源码）</h3><div class=\"custom-quote warning\">\n<span class=\"custom-quote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M20.86 14.13C20 14.7 19.56 15.74 19.77 16.76C20.13 18.55 18.55 20.13 16.76 19.77C15.74 19.57 14.7 20 14.13 20.86C13.12 22.38 10.89 22.38 9.88 20.86C9.3 20 8.26 19.56 7.24 19.77C5.45 20.13 3.87 18.55 4.23 16.76C4.43 15.74 4 14.7 3.14 14.13C1.62 13.12 1.62 10.89 3.14 9.88C4 9.3 4.44 8.26 4.23 7.24C3.87 5.45 5.45 3.87 7.24 4.23C8.26 4.44 9.3 4 9.87 3.14C10.88 1.62 13.11 1.62 14.12 3.14C14.7 4 15.74 4.44 16.76 4.23C18.55 3.87 20.13 5.45 19.77 7.24C19.56 8.26 20 9.3 20.86 9.87C22.38 10.88 22.38 13.12 20.86 14.13Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M12 8V13\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M12 15.99V16.01\"></path>\n</svg>\n</span>\n<p class=\"custom-quote-title\">注意</p>\n<p>在构建<code>APP</code>前，请先构建好服务端，否则<code>APP</code>无法显示。且构建APP对服务器资源消耗大，请使用<code>2H4G</code>及以上的配置，目前已知我<code>1H2G</code>的服务器无法构建。或者你也可以在本地电脑构建。</p>\n</div>\n<p>1.打开<code>/fiora/packages/app/src/socket.ts</code>文件，找到代码：<code>const host = &#39;https://fiora.suisuijiang.com&#39;;</code>将其中的域名修改为你自己的，如：<code>const host = &#39;https://chat.meerost.com&#39;;</code><br>2.打开<code>/fiora/packages/app/src/utils/constant.ts</code>文件，将<code>export const referer = &#39;https://fiora.suisuijiang.com/&#39;;</code>中的域名修改为你自己的，如：<code>export const referer=&#39;https://chat.meerost.com/&#39;;</code><br>3.打开<code>/fiora/packages/app/src/utils/uploadFile.ts</code>文件，找到代码（最后几行）。</p>\n<pre class=\"line-numbers language-typescript\" data-language=\"typescript\"><code class=\"language-typescript\">if (url.startsWith(&#39;&#x2F;&#39;)) &#123;\n        return &#96;https:&#x2F;&#x2F;fiora.suisuijiang.com$&#123;url&#125;&#96;; &#x2F;*将域名修改为自己的，如：&#96;https:&#x2F;&#x2F;chat.meerost.com$&#123;url&#125;&#96;*&#x2F;\n    &#125;</code></pre>\n<p>4.（可选）如果需要修改<code>APP</code>的名字和版本，请修改<code>/fiora/packages/app/app.json</code>文件中的<code>name</code>和<code>version</code>，请勿自行修改其中的包名（<code>bundleIdentifier</code>和<code>package</code>），否则在安装时，会提示签名不一致。<br>5.（可选）如果需要修改<code>APP</code>的作者介绍模板和隐私政策显示模板，请修改<code>/fiora/packages/app/src/pages/Other/Other.tsx</code>和<code>/fiora/packages/app/src/pages/Other/PrivacyPolicy.tsx</code>两个文件。</p>\n<h3 id=\"构建APP-1\"><a href=\"#构建APP-1\" class=\"headerlink\" title=\"构建APP\"></a>构建APP</h3><p>1.安装 <code>expo</code>： <code>yarn global add expo-cli</code><br>2.<code>cd</code>到<code>/fiora/packages/app</code>下。<br>3.安装依赖： <code>yarn install</code><br>4.开始构建：<code>expo build:android -t apk</code></p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>开始构建这一步，它会提示你使用秘钥的配置，这里可以使用<code>expo</code>自带的秘钥，然后在命令行登陆<code>expo</code>账号（请自行在官网注册）。这里<code>expo</code>的命令行有个坑，到构建这一步，需要你通过键盘的上下两个键（键盘右下角）来控制选项，然后回车即可。<br>最后在 <a href=\"https://expo.dev/\">expo官网</a> 就可以看到已经构建好的<code>APP</code>，直接下载安装即可。</p></blockquote>\n<div class=\"custom-quote tip\">\n<span class=\"custom-quote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M20.86 14.13C20 14.7 19.56 15.74 19.77 16.76C20.13 18.55 18.55 20.13 16.76 19.77C15.74 19.57 14.7 20 14.13 20.86C13.12 22.38 10.89 22.38 9.88 20.86C9.3 20 8.26 19.56 7.24 19.77C5.45 20.13 3.87 18.55 4.23 16.76C4.43 15.74 4 14.7 3.14 14.13C1.62 13.12 1.62 10.89 3.14 9.88C4 9.3 4.44 8.26 4.23 7.24C3.87 5.45 5.45 3.87 7.24 4.23C8.26 4.44 9.3 4 9.87 3.14C10.88 1.62 13.11 1.62 14.12 3.14C14.7 4 15.74 4.44 16.76 4.23C18.55 3.87 20.13 5.45 19.77 7.24C19.56 8.26 20 9.3 20.86 9.87C22.38 10.88 22.38 13.12 20.86 14.13Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M12.01 15C12.01 14.5 12.01 14.5 12.01 14.5C12.04 13.75 13 13.46 14.04 12.2C14.41 11.74 14.69 11.41 14.86 10.85C15.15 9.95 14.92 9.18 14.86 9.02C14.8 8.79 14.52 8 13.72 7.46C13.06 7.02 12.42 7 12.14 7C11.9 7 11.36 7 10.78 7.3C10.28 7.56 9.98 7.9 9.83 8.1C9.24 8.82 9.06 9.63 9 10.06\"></path>\n<path stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M11.99 18H12.01\"></path>\n</svg></span>\n<p class=\"custom-quote-title\">提示</p>\n<p><code>app</code>目前已知问题：无法上传图片和文件，也无法点开显示在网页端正常上传的图片，不知道是什么地方还需要修改，等<code>fiora</code>作者优化app的配置后，我再来完善一下。</p>\n</div>\n","feature":"true","text":"情境引入 fiora介绍 fiora 是一款有趣的聊天应用. 基于 node.js, mongodb, react 和 socket.io 等技术开发 项目地址：Fiora功能 1.注册账号并登录, 可以长久保存你的数据 2.加入现有群组或者创建自己的群组, 来和大家交流 3.和...","link":"","photos":[],"count_time":{"symbolsCount":"6.8k","symbolsTime":"6 mins."},"categories":[{"name":"Diy","slug":"Diy","count":1,"path":"api/categories/Diy.json"}],"tags":[{"name":"fiora","slug":"fiora","count":1,"path":"api/tags/fiora.json"},{"name":"Diy","slug":"Diy","count":1,"path":"api/tags/Diy.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%83%85%E5%A2%83%E5%BC%95%E5%85%A5\"><span class=\"toc-text\">情境引入</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%8A%9F%E8%83%BD\"><span class=\"toc-text\">功能</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%B1%95%E7%A4%BA\"><span class=\"toc-text\">展示</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%AE%89%E8%A3%85\"><span class=\"toc-text\">安装</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%8E%AF%E5%A2%83\"><span class=\"toc-text\">环境</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%BF%90%E8%A1%8C\"><span class=\"toc-text\">运行</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%85%8D%E7%BD%AE%E4%B8%8E%E4%BB%A3%E7%90%86\"><span class=\"toc-text\">配置与代理</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">配置</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#nginx%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86\"><span class=\"toc-text\">nginx反向代理</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%AD%94%E6%94%B9\"><span class=\"toc-text\">魔改</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%9E%84%E5%BB%BAAPP\"><span class=\"toc-text\">构建APP</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%EF%BC%88%E6%BA%90%E7%A0%81%EF%BC%89\"><span class=\"toc-text\">修改配置（源码）</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%9E%84%E5%BB%BAAPP-1\"><span class=\"toc-text\">构建APP</span></a></li></ol></li></ol>","author":{"name":"三月","slug":"blog-author","avatar":"/images/info/logo.png","link":"/","description":"我有两台电脑，一台用来写代码，另一台也用来写代码。","socials":{"github":"https://github.com/OriOYue","twitter":"","stackoverflow":"https://stackoverflow.com/users/16669353/meerost","wechat":"","qq":"","weibo":"","zhihu":"https://www.zhihu.com/people/MeerOst","csdn":"https://blog.csdn.net/qq_41674631?spm=1010.2135.3001.5421","juejin":"","customs":{"bilibili":{"icon":"/images/RaumzeitBlog/202108151153891.svg","link":"https://space.bilibili.com/510117433"},"book":{"icon":"/images/RaumzeitBlog/202108151153746.svg","link":"https://www.douban.com/people/MeerOst/"}}}},"mapped":true,"prev_post":{},"next_post":{"title":"给Aurora主题添加图片灯箱","uid":"63b83d752978f6e1cb65e67241c95de9","slug":"AddLightBox","date":"2021-08-13T09:13:11.000Z","updated":"2022-06-01T12:55:25.662Z","comments":true,"path":"api/articles/AddLightBox.json","keywords":"编程,笔记,生活,感悟,诗歌,音乐,影视,博客,Hexo","cover":"/images/RaumzeitBlog/202108131716513.jpg","text":" Aurora主题外观很好，但是却没有next主题完美，这不，就没有图片灯箱功能，这让本来就近视的我更加看不清图片。 所以经过一早上的奋斗，终于在网上找到了解决方案。 提示 由于主题自定义化模块较少，所以需要更改源码 由于使用的是fancybox，所以需要引入jquery _co...","link":"","photos":[],"count_time":{"symbolsCount":"1.9k","symbolsTime":"2 mins."},"categories":[{"name":"Aurora","slug":"Aurora","count":4,"path":"api/categories/Aurora.json"}],"tags":[{"name":"Aurora","slug":"Aurora","count":4,"path":"api/tags/Aurora.json"},{"name":"魔改","slug":"魔改","count":4,"path":"api/tags/魔改.json"},{"name":"图片灯箱","slug":"图片灯箱","count":1,"path":"api/tags/图片灯箱.json"}],"author":{"name":"三月","slug":"blog-author","avatar":"/images/info/logo.png","link":"/","description":"我有两台电脑，一台用来写代码，另一台也用来写代码。","socials":{"github":"https://github.com/OriOYue","twitter":"","stackoverflow":"https://stackoverflow.com/users/16669353/meerost","wechat":"","qq":"","weibo":"","zhihu":"https://www.zhihu.com/people/MeerOst","csdn":"https://blog.csdn.net/qq_41674631?spm=1010.2135.3001.5421","juejin":"","customs":{"bilibili":{"icon":"/images/RaumzeitBlog/202108151153891.svg","link":"https://space.bilibili.com/510117433"},"book":{"icon":"/images/RaumzeitBlog/202108151153746.svg","link":"https://www.douban.com/people/MeerOst/"}}}},"feature":"true"}}