{"title":"腾讯云轻量应用服务器流量监控","uid":"ae8d8aadd92f12202a5a9fd9d8ea753d","slug":"LightHouseFlowMonitor","date":"2021-08-12T13:11:45.000Z","updated":"2022-05-24T20:21:05.572Z","comments":true,"path":"api/articles/LightHouseFlowMonitor.json","keywords":"编程,笔记,生活,感悟,诗歌,音乐,影视,博客,Hexo","cover":"/images/RaumzeitBlog/202108122115628.jpg","content":"<h2 id=\"情景引入\"><a href=\"#情景引入\" class=\"headerlink\" title=\"情景引入\"></a>情景引入</h2><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>众所周知，作为“良心云”的腾讯云很早之前就推出了<code>轻量应用服务器</code>，其中最受青睐的就是香港轻量应用服务器了，作为一枚穷人，博主也是用的1H2G的香港轻量。虽然性价比高，但也有无奈的一面，如：每月流量限制，超出另计费。作为白嫖党，自然不能因为DDOS而让自己走上破产。所以我借助 <a href=\"https://github.com/2lifetop/LightHouse_Automatic_Shutdown/\" target=\"_blank\" rel=\"nofollow\">2lifetop</a> 提供的源代码，实现了实时流量监控以及超出流量限制自动关机。</p></blockquote>\n<h2 id=\"设置ID和KEY\"><a href=\"#设置ID和KEY\" class=\"headerlink\" title=\"设置ID和KEY\"></a>设置ID和KEY</h2><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>由于项目需要腾讯云服务器的实时数据和钉钉机器人。</p>\n<p>所以需要设置腾讯云的<code>SecretId</code>和<code>SecretKey</code>，以及钉钉机器人的<code>Token</code>。</p></blockquote>\n<h3 id=\"获取腾讯云API密钥\"><a href=\"#获取腾讯云API密钥\" class=\"headerlink\" title=\"获取腾讯云API密钥\"></a>获取腾讯云API密钥</h3><p>前往 <a href=\"https://console.cloud.tencent.com/cam/capi\" target=\"_blank\" rel=\"nofollow\">访问密钥 - 控制台</a> ，点击新建 密钥，复制获取的<code>SecretId</code>和<code>SecretKey</code>，等一会儿会用到。</p>\n<p><a data-fancybox=\"gallery\" href=\"/images/RaumzeitBlog/202108122140610.JPG\"><img src=\"/images/RaumzeitBlog/202108122140610.JPG\" alt=\"腾讯云API\"></a></p>\n<h3 id=\"获取钉钉机器人Token\"><a href=\"#获取钉钉机器人Token\" class=\"headerlink\" title=\"获取钉钉机器人Token\"></a>获取钉钉机器人Token</h3><p>打开电脑端的钉钉，新建一个群，打开群设置，点击智能群助手下的添加机器人，</p>\n<p><a data-fancybox=\"gallery\" href=\"/images/RaumzeitBlog/202108122153576.JPG\"><img src=\"/images/RaumzeitBlog/202108122153576.JPG\" alt=\"钉钉机器人\"></a></p>\n<p>再选择自定义机器人，</p>\n<p><a data-fancybox=\"gallery\" href=\"/images/RaumzeitBlog/202108122311879.JPG\"><img src=\"/images/RaumzeitBlog/202108122311879.JPG\" alt=\"钉钉机器人\"></a></p>\n<p>再根据图示：</p>\n<p><a data-fancybox=\"gallery\" href=\"/images/RaumzeitBlog/202108122155892.JPG\"><img src=\"/images/RaumzeitBlog/202108122155892.JPG\" alt=\"钉钉机器人\"></a></p>\n<p>先填写机器人名称，再将安全设置的自定义关键词打勾，填写关键词为“流量告警”。</p>\n<p>最后找到“4”中的<code>Token</code>，其连接形式如<code>https://oapi.dingtalk.com/robot/send?access_token=973e7b241234567890141d60c24e9e71234567890d7a4cef18ed9ec2fedfvfd</code></p>\n<p>只需记录<code>token</code>后面的值，即<code>973e7b241234567890141d60c24e9e71234567890d7a4cef18ed9ec2fedfvfd</code></p>\n<h2 id=\"Github-Fork项目，设置相关数据\"><a href=\"#Github-Fork项目，设置相关数据\" class=\"headerlink\" title=\"Github Fork项目，设置相关数据\"></a><code>Github Fork</code>项目，设置相关数据</h2><h3 id=\"Fork项目\"><a href=\"#Fork项目\" class=\"headerlink\" title=\"Fork项目\"></a><code>Fork</code>项目</h3><p>前往 <a href=\"https://github.com/MeerOst/MeerOstLightHouseFlowMonitor\" target=\"_blank\">腾讯云轻量应用服务器流量告警</a> 点击右上角的<code>Fork</code>按钮。</p>\n<h3 id=\"相关配置\"><a href=\"#相关配置\" class=\"headerlink\" title=\"相关配置\"></a>相关配置</h3><h4 id=\"ID和Key设置\"><a href=\"#ID和Key设置\" class=\"headerlink\" title=\"ID和Key设置\"></a>ID和Key设置</h4><p>打开你的流量监控的项目仓库，并找到仓库设置，选择Secrets，再点击<code>New repository secret</code>按钮新建<code>Secret</code></p>\n<p><a data-fancybox=\"gallery\" href=\"/images/RaumzeitBlog/202108122213998.JPG\"><img src=\"/images/RaumzeitBlog/202108122213998.JPG\" alt=\"Github\"></a></p>\n<p>然后像这样填写相关数据：</p>\n<p><a data-fancybox=\"gallery\" href=\"/images/RaumzeitBlog/202108122213647.JPG\"><img src=\"/images/RaumzeitBlog/202108122213647.JPG\" alt=\"Github\"></a></p>\n<p> 其中四个相关值的填写格式如下：</p>\n<pre class=\"line-numbers language-yaml\" data-language=\"yaml\"><code class=\"language-yaml\">- SecretId\n name: SecretId\n value: AKIDe8NL2TeABCDEABCDE8AxTigNnyt12345 \n- SecretKey\n name: SecretKey\n value: NUKvFI4dy2pMdePu812345wdoasebcde\n- 钉钉机器人token\n name: webhook\n value: &quot;973e7b241234567890141d60c24e9e71234567890d71234518ed9ec2fe123456&quot; #注意添加双引号</code></pre>\n\n<h4 id=\"修改配置\"><a href=\"#修改配置\" class=\"headerlink\" title=\"修改配置\"></a>修改配置</h4><h5 id=\"更改运行频率：\"><a href=\"#更改运行频率：\" class=\"headerlink\" title=\"更改运行频率：\"></a>更改运行频率：</h5><p>这可以通过修改<code>.github/workflows/LH.yml</code>中<code>schedule</code>的<code>cron</code>参数来达到目的，</p>\n<p>如我的，每5分钟运行一次就是：</p>\n<pre class=\"line-numbers language-yaml\" data-language=\"yaml\"><code class=\"language-yaml\">schedule:\n  - cron: &quot;*&#x2F;5 * * * *&quot;</code></pre>\n\n<p>由于博主能力有限，如果需要修改成其他的频率，请自行百度。</p>\n<h5 id=\"关机百分比\"><a href=\"#关机百分比\" class=\"headerlink\" title=\"关机百分比\"></a>关机百分比</h5><p>此举的目的是，如果服务器的流量达到你设定的百分比，就自行关机，可以根据实际情况更改。</p>\n<p>如图：你需要修改这个<code>LH.py</code>中的<code>percent</code>值</p>\n<p><a data-fancybox=\"gallery\" href=\"/images/RaumzeitBlog/202108122232807.JPG\"><img src=\"/images/RaumzeitBlog/202108122232807.JPG\" alt=\"Github\"></a></p>\n<h2 id=\"运行项目\"><a href=\"#运行项目\" class=\"headerlink\" title=\"运行项目\"></a>运行项目</h2><p>根据如图的顺序即可运行配置</p>\n<p><a data-fancybox=\"gallery\" href=\"/images/RaumzeitBlog/202108122237405.JPG\"><img src=\"/images/RaumzeitBlog/202108122237405.JPG\" alt=\"Github\"></a></p>\n<p>你也可以点击运行的项目查看运行结果</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>效果展示：</p>\n<h3 id=\"github\"><a href=\"#github\" class=\"headerlink\" title=\"github\"></a><code>github</code></h3><p><a data-fancybox=\"gallery\" href=\"/images/RaumzeitBlog/202108122248062.JPG\"><img src=\"/images/RaumzeitBlog/202108122248062.JPG\" alt=\"Github\"></a></p>\n<h3 id=\"钉钉\"><a href=\"#钉钉\" class=\"headerlink\" title=\"钉钉\"></a>钉钉</h3><p><a data-fancybox=\"gallery\" href=\"/images/RaumzeitBlog/202108122251320.JPG\"><img src=\"/images/RaumzeitBlog/202108122251320.JPG\" alt=\"钉钉机器人\"></a></p></blockquote>\n<div class=\"custom-quote warning\">\n<span class=\"custom-quote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M20.86 14.13C20 14.7 19.56 15.74 19.77 16.76C20.13 18.55 18.55 20.13 16.76 19.77C15.74 19.57 14.7 20 14.13 20.86C13.12 22.38 10.89 22.38 9.88 20.86C9.3 20 8.26 19.56 7.24 19.77C5.45 20.13 3.87 18.55 4.23 16.76C4.43 15.74 4 14.7 3.14 14.13C1.62 13.12 1.62 10.89 3.14 9.88C4 9.3 4.44 8.26 4.23 7.24C3.87 5.45 5.45 3.87 7.24 4.23C8.26 4.44 9.3 4 9.87 3.14C10.88 1.62 13.11 1.62 14.12 3.14C14.7 4 15.74 4.44 16.76 4.23C18.55 3.87 20.13 5.45 19.77 7.24C19.56 8.26 20 9.3 20.86 9.87C22.38 10.88 22.38 13.12 20.86 14.13Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M12 8V13\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M12 15.99V16.01\"></path>\n</svg>\n</span>\n<p class=\"custom-quote-title\">注意</p>\n<p>这其中也有TG酱 ，可以通知关机信息，由于其需要科学上网，所以我并没有设置</p>\n<p>你可以去<code>telegram</code>搜索 <a href=\"https://t.me/realtgchat_bot\" target=\"_blank\" rel=\"nofollow\">@realtgchat_bot</a>，获取<code>token</code></p>\n<p>其在<code>Secrets</code>的数据填写形式如下：</p>\n<pre class=\"line-numbers language-yaml\" data-language=\"yaml\"><code class=\"language-yaml\">- TG酱\n name: tgToken\n value: &quot;WnU3abcdREYxNjQ5NzA12345&quot; #注意双引号</code></pre>\n\n\n</div>\n<div class=\"custom-quote tip\">\n<span class=\"custom-quote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M20.86 14.13C20 14.7 19.56 15.74 19.77 16.76C20.13 18.55 18.55 20.13 16.76 19.77C15.74 19.57 14.7 20 14.13 20.86C13.12 22.38 10.89 22.38 9.88 20.86C9.3 20 8.26 19.56 7.24 19.77C5.45 20.13 3.87 18.55 4.23 16.76C4.43 15.74 4 14.7 3.14 14.13C1.62 13.12 1.62 10.89 3.14 9.88C4 9.3 4.44 8.26 4.23 7.24C3.87 5.45 5.45 3.87 7.24 4.23C8.26 4.44 9.3 4 9.87 3.14C10.88 1.62 13.11 1.62 14.12 3.14C14.7 4 15.74 4.44 16.76 4.23C18.55 3.87 20.13 5.45 19.77 7.24C19.56 8.26 20 9.3 20.86 9.87C22.38 10.88 22.38 13.12 20.86 14.13Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M12.01 15C12.01 14.5 12.01 14.5 12.01 14.5C12.04 13.75 13 13.46 14.04 12.2C14.41 11.74 14.69 11.41 14.86 10.85C15.15 9.95 14.92 9.18 14.86 9.02C14.8 8.79 14.52 8 13.72 7.46C13.06 7.02 12.42 7 12.14 7C11.9 7 11.36 7 10.78 7.3C10.28 7.56 9.98 7.9 9.83 8.1C9.24 8.82 9.06 9.63 9 10.06\"></path>\n<path stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M11.99 18H12.01\"></path>\n</svg></span>\n<p class=\"custom-quote-title\">提示</p>\n<p><p>钉钉机器人</p>\n<ul>\n<li>由于钉钉机器人部分的代码是我写的，略显粗糙，存在：超过一台服务器后，钉钉端只能显示一台服务器的情况，后期有时间的话，我会改一改的，还请各位见谅。</li>\n</ul>\n</p>\n</div>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>最后，由衷感谢 <a href=\"https://github.com/2lifetop/LightHouse_Automatic_Shutdown/\" target=\"_blank\" rel=\"nofollow\">2lifetop </a> 提供的源码。</p></blockquote>\n","feature":true,"text":"情景引入 众所周知，作为“良心云”的腾讯云很早之前就推出了轻量应用服务器，其中最受青睐的就是香港轻量应用服务器了，作为一枚穷人，博主也是用的1H2G的香港轻量。虽然性价比高，但也有无奈的一面，如：每月流量限制，超出另计费。作为白嫖党，自然不能因为DDOS而让自己走上破产。所以我借...","link":"","photos":[],"count_time":{"symbolsCount":"1.7k","symbolsTime":"2 mins."},"categories":[{"name":"服务器","slug":"服务器","count":1,"path":"api/categories/服务器.json"}],"tags":[{"name":"腾讯云","slug":"腾讯云","count":1,"path":"api/tags/腾讯云.json"},{"name":"服务器","slug":"服务器","count":1,"path":"api/tags/服务器.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%83%85%E6%99%AF%E5%BC%95%E5%85%A5\"><span class=\"toc-text\">情景引入</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%AE%BE%E7%BD%AEID%E5%92%8CKEY\"><span class=\"toc-text\">设置ID和KEY</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%8E%B7%E5%8F%96%E8%85%BE%E8%AE%AF%E4%BA%91API%E5%AF%86%E9%92%A5\"><span class=\"toc-text\">获取腾讯云API密钥</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%8E%B7%E5%8F%96%E9%92%89%E9%92%89%E6%9C%BA%E5%99%A8%E4%BA%BAToken\"><span class=\"toc-text\">获取钉钉机器人Token</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Github-Fork%E9%A1%B9%E7%9B%AE%EF%BC%8C%E8%AE%BE%E7%BD%AE%E7%9B%B8%E5%85%B3%E6%95%B0%E6%8D%AE\"><span class=\"toc-text\">Github Fork项目，设置相关数据</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Fork%E9%A1%B9%E7%9B%AE\"><span class=\"toc-text\">Fork项目</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">相关配置</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#ID%E5%92%8CKey%E8%AE%BE%E7%BD%AE\"><span class=\"toc-text\">ID和Key设置</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">修改配置</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%E6%9B%B4%E6%94%B9%E8%BF%90%E8%A1%8C%E9%A2%91%E7%8E%87%EF%BC%9A\"><span class=\"toc-text\">更改运行频率：</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%E5%85%B3%E6%9C%BA%E7%99%BE%E5%88%86%E6%AF%94\"><span class=\"toc-text\">关机百分比</span></a></li></ol></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%BF%90%E8%A1%8C%E9%A1%B9%E7%9B%AE\"><span class=\"toc-text\">运行项目</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#github\"><span class=\"toc-text\">github</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%92%89%E9%92%89\"><span class=\"toc-text\">钉钉</span></a></li></ol></li></ol>","author":{"name":"三月","slug":"blog-author","avatar":"/images/info/logo.png","link":"/","description":"我有两台电脑，一台用来写代码，另一台也用来写代码。","socials":{"github":"https://github.com/OriOYue","twitter":"","stackoverflow":"https://stackoverflow.com/users/16669353/meerost","wechat":"","qq":"","weibo":"","zhihu":"https://www.zhihu.com/people/MeerOst","csdn":"https://blog.csdn.net/qq_41674631?spm=1010.2135.3001.5421","juejin":"","customs":{"bilibili":{"icon":"/images/RaumzeitBlog/202108151153891.svg","link":"https://space.bilibili.com/510117433"},"book":{"icon":"/images/RaumzeitBlog/202108151153746.svg","link":"https://www.douban.com/people/MeerOst/"}}}},"mapped":true,"prev_post":{"title":"给Aurora主题添加图片灯箱","uid":"63b83d752978f6e1cb65e67241c95de9","slug":"AddLightBox","date":"2021-08-13T09:13:11.000Z","updated":"2022-06-01T12:41:20.484Z","comments":true,"path":"api/articles/AddLightBox.json","keywords":"编程,笔记,生活,感悟,诗歌,音乐,影视,博客,Hexo","cover":"/images/RaumzeitBlog/202108131716513.jpg","text":" Aurora主题外观很好，但是却没有next主题完美，这不，就没有图片灯箱功能，这让本来就近视的我更加看不清图片。 所以经过一早上的奋斗，终于在网上找到了解决方案。 提示 由于主题自定义化模块较少，所以需要更改源码 由于使用的是fancybox，所以需要引入jquery _co...","link":"","photos":[],"count_time":{"symbolsCount":"1.9k","symbolsTime":"2 mins."},"categories":[{"name":"Aurora","slug":"Aurora","count":4,"path":"api/categories/Aurora.json"}],"tags":[{"name":"Aurora","slug":"Aurora","count":4,"path":"api/tags/Aurora.json"},{"name":"魔改","slug":"魔改","count":4,"path":"api/tags/魔改.json"},{"name":"图片灯箱","slug":"图片灯箱","count":1,"path":"api/tags/图片灯箱.json"}],"author":{"name":"三月","slug":"blog-author","avatar":"/images/info/logo.png","link":"/","description":"我有两台电脑，一台用来写代码，另一台也用来写代码。","socials":{"github":"https://github.com/OriOYue","twitter":"","stackoverflow":"https://stackoverflow.com/users/16669353/meerost","wechat":"","qq":"","weibo":"","zhihu":"https://www.zhihu.com/people/MeerOst","csdn":"https://blog.csdn.net/qq_41674631?spm=1010.2135.3001.5421","juejin":"","customs":{"bilibili":{"icon":"/images/RaumzeitBlog/202108151153891.svg","link":"https://space.bilibili.com/510117433"},"book":{"icon":"/images/RaumzeitBlog/202108151153746.svg","link":"https://www.douban.com/people/MeerOst/"}}}},"feature":"true"},"next_post":{"title":"给Aurora主题增加图片CDN","uid":"6c7e8ce860d8756553dd1d8f84913e5a","slug":"AddPictureCDN","date":"2021-08-14T13:53:32.000Z","updated":"2022-05-24T20:18:49.975Z","comments":true,"path":"api/articles/AddPictureCDN.json","keywords":"编程,笔记,生活,感悟,诗歌,音乐,影视,博客,Hexo","cover":"/images/RaumzeitBlog/202108142153647.jpg","text":"情景引入 由于github不支持百度爬虫的爬取，且在国内访问速度较慢，所以我选择将hexo部署到自己的服务器上。为了减轻服务器的压力，我选择为图片资源加上CDN，但是国内CDN需要域名备案，所以我选择将图片放在github上，再采用jsdelivr加速。jsDelivr YYDS...","link":"","photos":[],"count_time":{"symbolsCount":"2.3k","symbolsTime":"2 mins."},"categories":[{"name":"Aurora","slug":"Aurora","count":4,"path":"api/categories/Aurora.json"}],"tags":[{"name":"Aurora","slug":"Aurora","count":4,"path":"api/tags/Aurora.json"},{"name":"魔改","slug":"魔改","count":4,"path":"api/tags/魔改.json"},{"name":"jsdelivr","slug":"jsdelivr","count":1,"path":"api/tags/jsdelivr.json"},{"name":"CDN","slug":"CDN","count":1,"path":"api/tags/CDN.json"}],"author":{"name":"三月","slug":"blog-author","avatar":"/images/info/logo.png","link":"/","description":"我有两台电脑，一台用来写代码，另一台也用来写代码。","socials":{"github":"https://github.com/OriOYue","twitter":"","stackoverflow":"https://stackoverflow.com/users/16669353/meerost","wechat":"","qq":"","weibo":"","zhihu":"https://www.zhihu.com/people/MeerOst","csdn":"https://blog.csdn.net/qq_41674631?spm=1010.2135.3001.5421","juejin":"","customs":{"bilibili":{"icon":"/images/RaumzeitBlog/202108151153891.svg","link":"https://space.bilibili.com/510117433"},"book":{"icon":"/images/RaumzeitBlog/202108151153746.svg","link":"https://www.douban.com/people/MeerOst/"}}}}}}